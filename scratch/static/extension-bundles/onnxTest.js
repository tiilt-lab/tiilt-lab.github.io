var onnxTest=function(e,n){"use strict";function t(e,n,t,o){return new(t||(t=Promise))((function(r,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,s)}a((o=o.apply(e,n||[])).next())}))}class o{get runtime(){return function(e,n=100){return t(this,void 0,void 0,(function*(){let t;for(;!e.ready;)yield new Promise((e=>{clearTimeout(t),t=setTimeout(e,n)}));clearTimeout(t)}))}(this).then((()=>this.onnx))}get globalOnnx(){return window.ort}constructor(){this.ready=!1;this.globalOnnx?this.resolve():((e,n,t)=>{const o=document.createElement("script");o.onload=n,o.onerror=null!=t?t:()=>{throw new Error(`Error loading endpoint: ${e}`)},o.src=e,o.async=!0,document.body.appendChild(o)})(o.FromCDN,this.resolve.bind(this))}resolve(){this.ready=!0,this.onnx=this.globalOnnx}}o.FromCDN="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js";var r=(()=>{let e,r,i=[function(e,n){}],c=[];var s,a,l;return r=class extends n.Extension{init(e){return t(this,void 0,void 0,(function*(){this.onnx=yield(new o).runtime}))}defineBlocks(){return{test:{type:n.BlockType.Command,text:"eee",operation:()=>t(this,void 0,void 0,(function*(){try{const{InferenceSession:e,Tensor:n}=this.onnx,t=yield e.create(`${location.href}/static/model.onnx`),o=Float32Array.from([1,2,3,4,5,6,7,8,9,10,11,12]),r=Float32Array.from([10,20,30,40,50,60,70,80,90,100,110,120]),i=new n("float32",o,[3,4]),c={a:i,b:new n("float32",r,[4,3])},s=(yield t.run(c)).c.data;console.log(s)}catch(e){console.error(`failed to inference ONNX model: ${e}.`)}}))}}}},s=r,"symbol"==typeof(a="ExtensionNameGoesHere")&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:l?"".concat(l," ",a):a}),function(e,n,t,o,r,i){function c(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,a=o.kind,l="getter"===a?"get":"setter"===a?"set":"value",u=!n&&e?o.static?e:e.prototype:null,d=n||(u?Object.getOwnPropertyDescriptor(u,o.name):{}),f=!1,h=t.length-1;h>=0;h--){var p={};for(var m in o)p[m]="access"===m?{}:o[m];for(var m in o.access)p.access[m]=o.access[m];p.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(c(e||null))};var v=(0,t[h])("accessor"===a?{get:d.get,set:d.set}:d[l],p);if("accessor"===a){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(s=c(v.get))&&(d.get=s),(s=c(v.set))&&(d.set=s),(s=c(v.init))&&r.push(s)}else(s=c(v))&&("field"===a?r.push(s):d[l]=s)}u&&Object.defineProperty(u,o.name,d),f=!0}(null,e={value:r},i,{kind:"class",name:r.name},null,c),r=e.value,function(e,n,t){for(var o=arguments.length>2,r=0;r<n.length;r++)t=o?n[r].call(e,t):n[r].call(e)}(r,c),r})();return e.Extension=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({},ExtensionFramework);//# sourceMappingURL=onnxTest.js.map
